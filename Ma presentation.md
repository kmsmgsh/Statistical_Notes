Recurrent Event and Terminal Event

这两类事件不独立，可能会同时发生

提出统计模型和估计

实际生活中观测到的数据



健康-》可能发生了一次CVD（心脏病）它包括很多种病（stroke中风，MI 心肌梗塞）

从健康开始可能发生第一次心脏病，可能是中风，也可能是心肌梗塞，往后还可能有第二次第三次，第n次，每一次病种类可能不一样，Stoke+MI，MI+Stroke，MI+MI，Stroke+Stroke，。。。。。，+Terminal(dead)

这是一连串时间，可能重复，也可能不重复（太严重没抢救过来）这些事情不是独立了：复发的次数越多，病的状态越严重-》更可能死亡

不独立，事件背后不仅仅关心发生，还关心发生的时间。

统计模型：数据能考虑状态的转移，还能挖掘出信息，状态转移发生的时间。

心脏病：第几个月发生，和几年以后才发生，差别很大。对于病情本身的表现来说，是不同的情况。所以时间是很重要的因素。数据本身也有order，不能单纯的看成多元顺序。发生了第二次，在这基础上往下发展，这个顺序很重要

最后一特点，在healthy状态，同时有两种可能：下一个可重复事件，一次就终止的事件：往未来看，都有几种可能发生的事件，叫competing risk。

给你一组数据，找到一个统计模型，可以很好地反映出这几点：发生次数，发生时间，competing risk的结构。

这种数据：time-to-event data.

Survival data,没有后面这一串（recurrent 发生），只有一个路劲：到死亡。

再广义一点，就是time-to-event。

研究这些数据的时候，你用什么方法，取决于你要回答的现实问题是什么

协变量和时间，事件发生的关系，相关关系。

也有可能现实问题：事件发生的次数，发生的关系：不考虑事件的结构

Prediction：另外一种思路，你做预测的时候，需要简单，但是稳健的模型。

想知道：协变量和时间发生的概率，发生时间的关系。需要一个尽可能完整（数据客观的一些特点）：血压/胆固醇水平高低，和心脏病复发之间的关系。医学：以前发生过的心脏病的次数+时间，会影响现在的血压+胆固醇水平。在当今时刻的水平，也会影响未来复发/死亡的概率。

衡量血压，心脏病，之间的因果的关系也要考虑在内。

也要考虑血压的关系和心脏病复发的关系不一定是常数，也可能和时间有关系：长时间观测，那么长的时间内，血压和心脏病复发之间的关系，不可能一直是常数，更可能和时间增长相关，是不是随时间变化而变化。

挑战：相当于motivation：新的模型

怎么去展示这一系列事件发生的概率和顺序，如何在模型中体现。

以前的事件会影响协变量，而且是纵向协变量，如何分析这两个关系。

血压-》心脏病复发：有的人拿baseline的测量值来简历模型，来看血压和心脏病的关系

不仅要考虑进组的血压，后续还会（每隔三年），再测量，可能更感兴趣某个时刻，对复发的概率：可能后者概率更大。

协变量是纵向数据，收到以前信息的影响，系数依赖于时间的话，如何估出来。

三个不同的project。

第一个的innovation是最大的。

搭起了统计模型去解决这些问题。

第一个工作：第一个复发的心脏病：stroke$\times n$,

第二个：不同种类可以复发的时间：stroke+MI

第三个：变量选择：协变量和事件的关系：血压~心脏病的risk是否随时间变化。

0-1-...k k次复发，同一种事件。

下面是terminal的，死亡，发生了一次subject就无法观测了，K+1~2K+1.



第二个project：k种不同的可重复发生的时间，每一行白色的方框代表一类事件。假设对于所有个体，事件一共M次。紫色的方框是指死亡的时间。包括了所有的可能发生的状态转移路径。

路径之间的相似程度和关心的变量。



统计模型，第一块：第一个模型第二个是第二个project的模型。

Intensity:survival-time-event-survival很核心的一个量。

定义：和概率很接近：不是条件概率或者条件密度，不是这样。但是总的来说可以一定程度上代表这个事情发生的概率。

分子：给定历史信息，标记成$S_i(t)$到k-》k+1.

假设为半参的形式：哪些是$W_it$,哪些是$X_it$ 哪些参数coefficient和时间相关，哪些无关。

当前时刻t，未来$t+\delta t$

假定形式：recurrent event。

第一次复发第二次复发的模型的形式。

Multi-type k种不同的可以复发的事件，然后针对于死亡的事件。

P8

联合在：

用随机过程的东西：用markov的东西。

一连串的事件：他们是怎么从概率的角度联系起来：Markov的结构。

给定现在的信息X_it,W_it....给定你这些很重要的变量，未来发生的概率和现在条件独立：前后相关的关系。

Yik(t)是一个特别的术语：用的比较多：at risk process, 是一个随机过程 0-1的值，indicator，在t时刻能不能观察到。为什么要乘Yki(t)，coxmodel没有Yki(t)，因为不是随机过程，观察时间点建模的问题。

随机过程的（数学）语言表达能力更强。

counting process：记录了发生了多少次变量：减去那一串是一个martingale。

是epsilon，假设是Gaussian的。希望数学上比较容易处理的：counting process- 那一块出来是个鞅，所以要把Yki（t）放在那里：理论上表达比较方便。

为什么要用martingale：不用Gaussian的：你看就比方说你看第一个lambda的量：我们所说的状态转移函数是t的函数，也有uncertainty,这两点：用随机过程处理很容易，这符合随机过程的性质：二维的t的函数，也有随机性。一般统计量没有t的函数。

continuous的关于时间的函数，同时又有随机变量参与，固定住时间点的话。

如果协变量都能完美的观测到

当前值和未来时间的关系：

血压不可能每个时间点都知道，没测量的间隔点不知道

需要一个模型把血压的值（关于t的连续量，的估计）估计出来。然后拿血压（的估计值）和心脏病的关系。

还有一个创新点：怎么考虑因果关系：以前已经发生的事件的关系：协变量，response在过去历史发展的信息：影响到了协变量的水平，然后再进一步影响未来response的发展。

